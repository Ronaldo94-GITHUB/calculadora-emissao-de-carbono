<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>üåø Calculadora de Emiss√£o de CO‚ÇÇ</title>
  <meta name="description" content="Estimativa de emiss√µes de CO‚ÇÇ por transporte ‚Äî calcule por origem, destino, dist√¢ncia e modo de transporte." />
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="theme-scale--large">
  <a class="skip-link" href="#main">Ir para o conte√∫do principal</a>

  <header class="site-header">
    <div class="container">
      <h1 class="site-title">üåø Calculadora de Emiss√£o de CO‚ÇÇ</h1>
      <p class="site-subtitle">Estimativa r√°pida das suas emiss√µes com base em deslocamentos e modos de transporte.</p>
    </div>
  </header>

  <main id="main" class="container" role="main">
    <section id="calculator" aria-labelledby="calculator-title">
      <h2 id="calculator-title">Calcular emiss√µes</h2>

      <!-- Compact calculator: modo de exibi√ß√£o estilo calculadora -->
      <div id="calculator-compact" class="calculator-compact" aria-label="Calculadora compacta">
        <div class="compact-row compact-inputs">
          <input id="compact-origin" list="cities-list" class="compact-input" placeholder="Origem (cidade ou CEP)" aria-label="Origem">
          <input id="compact-destination" list="cities-list" class="compact-input" placeholder="Destino (cidade ou CEP)" aria-label="Destino">
        </div>

        <div class="compact-row compact-distance-row">
          <div class="compact-distance-wrap">
            <input id="compact-distance" class="compact-distance" type="number" min="0" step="0.1" placeholder="Dist√¢ncia (km)" readonly aria-describedby="compact-distance-help">
            <button id="compact-edit-distance" type="button" class="compact-edit-button" aria-pressed="false" aria-label="Editar dist√¢ncia">Editar</button>
          </div>
          <small id="compact-distance-help" class="helper-text">A dist√¢ncia ser√° preenchida automaticamente</small>

          <div class="compact-controls" style="display:flex;gap:.5rem;align-items:center;margin-top:.25rem;">
            <label style="font-size:.9rem;display:flex;align-items:center;gap:.5rem;">
              <input id="compact-use-road" type="checkbox">
              Usar dist√¢ncia por estrada
            </label>
          </div>
        </div>

        <div class="compact-display" id="compact-display">‚Äî kg CO‚ÇÇ</div>

        <div class="compact-transport-grid" role="tablist" aria-label="Modos de transporte">
          <button type="button" class="compact-transport-btn" data-mode="bicycle">üö≤<span class="visually-hidden">Bicicleta</span></button>
          <button type="button" class="compact-transport-btn compact-transport-btn--selected" data-mode="car">üöó<span class="visually-hidden">Carro</span></button>
          <button type="button" class="compact-transport-btn" data-mode="bus">üöå<span class="visually-hidden">√înibus</span></button>
          <button type="button" class="compact-transport-btn" data-mode="truck">üöõ<span class="visually-hidden">Caminh√£o</span></button>
        </div>

        <div class="compact-actions">
          <button id="compact-calc" class="button">Calcular</button>
        </div>
      </div>

      <!-- Formul√°rio principal oculto (mantido para compatibilidade l√≥gica). Visualmente removido conforme pedido. -->
      <form id="calculator-form" class="calc-form hidden" aria-hidden="true" novalidate>
        <div class="form-row">
          <label for="origin">Origem</label>
          <input id="origin" name="origin" type="text" list="cities-list" autocomplete="on" placeholder="Cidade ou CEP">
        </div>

        <div class="form-row">
          <label for="destination">Destino</label>
          <input id="destination" name="destination" type="text" list="cities-list" autocomplete="on" placeholder="Cidade ou CEP">
        </div>

        <datalist id="cities-list">
          <!-- Preenchido via JavaScript (js/routes-data.js) -->
        </datalist>

        <div class="form-row">
          <label for="distance">Dist√¢ncia (km)</label>
          <input id="distance" name="distance" type="number" min="0" step="0.1" aria-describedby="distance-help" readonly>
          <small id="distance-help" class="helper-text">A dist√¢ncia ser√° preenchida automaticamente ao selecionar rotas. Ative "Inserir manualmente" para editar.</small>
        </div>

        <div class="form-row checkbox-row">
          <label for="manual-distance">
            <input id="manual-distance" type="checkbox" aria-controls="distance">
            Inserir dist√¢ncia manualmente
          </label>
        </div>

        <div class="form-row checkbox-row">
          <label for="use-road">
            <input id="use-road" type="checkbox">
            Usar dist√¢ncia por estrada (se dispon√≠vel)
          </label>
        </div>

        <fieldset class="form-fieldset">
          <legend>Modo de transporte</legend>
          <div class="transport-options">
            <label>
              <input type="radio" name="transport" value="bicycle"> üö≤ Bicicleta
            </label>
            <label>
              <input type="radio" name="transport" value="car" checked> üöó Carro
            </label>
            <label>
              <input type="radio" name="transport" value="bus"> üöå √înibus
            </label>
            <label>
              <input type="radio" name="transport" value="truck"> üöö Caminh√£o
            </label>
          </div>
        </fieldset>

        <div class="form-actions">
          <button type="submit">Calcular Emiss√£o</button>
        </div>

        <div id="form-error" role="alert" aria-live="assertive" class="error" hidden></div>
      </form>
    </section>

    <section id="results" aria-labelledby="results-title" aria-live="polite">
      <h2 id="results-title">Resultados</h2>

      <div class="result-summary">
        <p>Emiss√£o estimada:</p>
        <output id="co2-output" name="co2">‚Äî kg CO‚ÇÇ</output>
      </div>

      <div class="result-extra">
        <div id="credits-summary">
          <p>Cr√©ditos de carbono necess√°rios: <strong id="credits-output">‚Äî</strong></p>
          <p class="text-muted">(Base: <span id="credit-kg-per">1000 kg/cr√©dito</span>)</p>
          <div id="credit-prices" class="text-muted">
            <p>Estimativa de pre√ßo:</p>
            <ul>
              <li>Min: R$ <span id="credit-price-min">‚Äî</span></li>
              <li>M√°x: R$ <span id="credit-price-max">‚Äî</span></li>
              <li>M√©dia: R$ <span id="credit-price-avg">‚Äî</span></li>
            </ul>
          </div>
        </div>

        <div id="savings-summary">
          <p>Economia vs Carro: <strong id="savings-output">‚Äî kg (‚Äî%)</strong></p>
        </div>
      </div>

      <div class="result-meter">
        <label for="co2-meter">Compara√ß√£o</label>
        <meter id="co2-meter" min="0" max="100" low="25" high="75" value="0"></meter>
        <small class="helper-text">Percentual relativo a uma refer√™ncia (ex.: 100 km de carro).</small>
      </div>

      <div id="results-cards" class="results-cards">
        <!-- UI.renderResults ir√° inserir cart√µes de resumo aqui -->
      </div>

      <!-- Placeholders usados pela `js/app.js` para renderiza√ß√£o e controle de visibilidade -->
      <div id="results-content" class="results-cards hidden" aria-live="polite"></div>
      <div id="comparison-content" class="hidden" aria-live="polite"></div>
      <div id="carbon-credits-content" class="hidden" aria-live="polite"></div> 

      <details class="result-details">
        <summary>Detalhamento das emiss√µes</summary>
        <table aria-describedby="table-caption">
          <caption id="table-caption">Quebra por trecho e por modo</caption>
          <thead>
            <tr><th>Trecho</th><th>Dist√¢ncia (km)</th><th>Modo</th><th>CO‚ÇÇ (kg)</th></tr>
          </thead>
          <tbody id="result-breakdown">
            <!-- Preenchido via JavaScript -->
          </tbody>
        </table>
      </details>

      <div id="comparison-container" class="comparison-container">
        <!-- UI.renderComparison ir√° inserir aqui -->
      </div>

      <div id="credits-container" class="credits-container">
        <!-- UI.renderCarbonCredits ir√° inserir aqui -->
      </div>

      <section id="routes-summary-section" aria-labelledby="routes-summary-title">
        <h3 id="routes-summary-title">Resumo de Rotas</h3>
        <div id="routes-summary-list" class="results-cards">
          <!-- Preenchido por js/routes-data.js com emiss√µes por rota e compara√ß√£o entre modos -->
        </div>
      </section>
    </section>

    <aside aria-labelledby="tips-title" class="sidebar">
      <h3 id="tips-title">Dicas para reduzir emiss√µes</h3>
      <ul>
        <li>Prefira transporte coletivo ou bicicleta quando poss√≠vel.</li>
        <li>Fa√ßa rotas otimizadas e combine viagens.</li>
        <li>Considere ve√≠culos el√©tricos ou de baixa emiss√£o.</li>
      </ul>

      <details>
        <summary>Premissas e fatores de emiss√£o</summary>
        <p>Os fatores de emiss√£o usam valores m√©dios por modo (ex.: gCO‚ÇÇ/km). Consulte as fontes para dados oficiais.</p>
      </details>

      <div id="compensation-history" class="compensation-history" aria-live="polite" style="margin-top:1rem;">
        <h4 style="margin-bottom:.5rem">Hist√≥rico de Compensa√ß√µes</h4>
        <ul id="compensation-list" class="text-muted" style="list-style:none;padding-left:0;margin:0;">
          <li>Nenhuma compensa√ß√£o registrada.</li>
        </ul>
      </div>
    </aside>

    <noscript>
      <p class="no-js">O JavaScript √© necess√°rio para calcular as emiss√µes. Ative-o e recarregue a p√°gina.</p>
    </noscript>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>Fonte: <a href="#" rel="noopener noreferrer">Exemplo de fonte de fatores de emiss√£o</a></small>
    </div>
  </footer>

  <!-- Dados de rotas/cidades e scripts -->
  <script src="js/routes-db.js" defer></script>
  <script src="js/routes-data.js" defer></script>
  <script src="js/config.js" defer></script>
  <script src="js/routing.js" defer></script>
  <script src="js/calculator.js" defer></script>
  <script src="js/j4uJs.js" defer></script>
  <script src="js/ui.js" defer></script>
  <script src="js/app.js" defer></script>


</body>
</html>